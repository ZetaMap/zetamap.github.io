<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>niryo_libraries.tf.transformations</title>
    <meta name="generator" content="pydoctor 23.9.1"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="readthedocstheme.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default mainnavbar">
      
  
  <div class="container-fluid">


    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="https://github.com/NiryoRobotics/ned_ros" class="projecthome">Niryo Ned 2</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <div id="search-box-container">
          <div class="input-group">
            <input id="search-box" type="search" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" autocomplete="off" />
            
            <span class="input-group-btn">
              <a style="display: none;" class="btn btn-default" id="search-clear-button" title="Clear" onclick="clearSearch()"><img src="fonts/x-circle.svg" alt="Clear" /></a>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help" /></a>
            </span>
          </div>
        </div>

      </div>

    </div>

  </div>

    
        <!-- Side navigation -->
      <div class="sidebarcontainer">
        <nav class="sidebar">
  

  <div>

      <div class="thingTitle">
        <span>Module</span>
        <code class="thisobject"><a href="niryo_libraries.tf.transformations.html" class="internal-link" title="This module">transformations</a></code> 
      </div>
      
      <div>
         
          <div class="childrenKindTitle">Contents</div>
          <ul><li><a class="rst-reference internal" href="#rst-requirements" id="rst-toc-entry-1">Requirements</a></li>
<li><a class="rst-reference internal" href="#rst-notes" id="rst-toc-entry-2">Notes</a></li>
<li><a class="rst-reference internal" href="#rst-references" id="rst-toc-entry-3">References</a></li>
<li><a class="rst-reference internal" href="#rst-examples" id="rst-toc-entry-4">Examples</a></li>
</ul>
        

        
         

        <div class="childrenKindTitle">Classes</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.transformations.Arcball.html" class="internal-link" title="niryo_libraries.tf.transformations.Arcball"><wbr></wbr>Arcball</a></code>
            </div>
        

    </li>
</ul>

        <div class="childrenKindTitle">Functions</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="#arcball_constrain_to_axis" class="internal-link" title="niryo_libraries.tf.transformations.arcball_constrain_to_axis">arcball<wbr></wbr>_constrain<wbr></wbr>_to<wbr></wbr>_axis</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#arcball_map_to_sphere" class="internal-link" title="niryo_libraries.tf.transformations.arcball_map_to_sphere">arcball<wbr></wbr>_map<wbr></wbr>_to<wbr></wbr>_sphere</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#arcball_nearest_axis" class="internal-link" title="niryo_libraries.tf.transformations.arcball_nearest_axis">arcball<wbr></wbr>_nearest<wbr></wbr>_axis</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#clip_matrix" class="internal-link" title="niryo_libraries.tf.transformations.clip_matrix">clip<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#compose_matrix" class="internal-link" title="niryo_libraries.tf.transformations.compose_matrix">compose<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#concatenate_matrices" class="internal-link" title="niryo_libraries.tf.transformations.concatenate_matrices">concatenate<wbr></wbr>_matrices</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#decompose_matrix" class="internal-link" title="niryo_libraries.tf.transformations.decompose_matrix">decompose<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#euler_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.euler_from_matrix">euler<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#euler_from_quaternion" class="internal-link" title="niryo_libraries.tf.transformations.euler_from_quaternion">euler<wbr></wbr>_from<wbr></wbr>_quaternion</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#euler_matrix" class="internal-link" title="niryo_libraries.tf.transformations.euler_matrix">euler<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#identity_matrix" class="internal-link" title="niryo_libraries.tf.transformations.identity_matrix">identity<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#inverse_matrix" class="internal-link" title="niryo_libraries.tf.transformations.inverse_matrix">inverse<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#is_same_transform" class="internal-link" title="niryo_libraries.tf.transformations.is_same_transform">is<wbr></wbr>_same<wbr></wbr>_transform</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#orthogonalization_matrix" class="internal-link" title="niryo_libraries.tf.transformations.orthogonalization_matrix">orthogonalization<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#projection_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.projection_from_matrix">projection<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#projection_matrix" class="internal-link" title="niryo_libraries.tf.transformations.projection_matrix">projection<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_about_axis" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_about_axis">quaternion<wbr></wbr>_about<wbr></wbr>_axis</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_conjugate" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_conjugate">quaternion<wbr></wbr>_conjugate</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_from_euler" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_from_euler">quaternion<wbr></wbr>_from<wbr></wbr>_euler</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_from_matrix">quaternion<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_inverse" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_inverse">quaternion<wbr></wbr>_inverse</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_matrix" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_matrix">quaternion<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_multiply" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_multiply">quaternion<wbr></wbr>_multiply</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#quaternion_slerp" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_slerp">quaternion<wbr></wbr>_slerp</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#random_quaternion" class="internal-link" title="niryo_libraries.tf.transformations.random_quaternion">random<wbr></wbr>_quaternion</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#random_rotation_matrix" class="internal-link" title="niryo_libraries.tf.transformations.random_rotation_matrix">random<wbr></wbr>_rotation<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#random_vector" class="internal-link" title="niryo_libraries.tf.transformations.random_vector">random<wbr></wbr>_vector</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#reflection_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.reflection_from_matrix">reflection<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#reflection_matrix" class="internal-link" title="niryo_libraries.tf.transformations.reflection_matrix">reflection<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#rotation_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.rotation_from_matrix">rotation<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#rotation_matrix" class="internal-link" title="niryo_libraries.tf.transformations.rotation_matrix">rotation<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#scale_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.scale_from_matrix">scale<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#scale_matrix" class="internal-link" title="niryo_libraries.tf.transformations.scale_matrix">scale<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#shear_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.shear_from_matrix">shear<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#shear_matrix" class="internal-link" title="niryo_libraries.tf.transformations.shear_matrix">shear<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#superimposition_matrix" class="internal-link" title="niryo_libraries.tf.transformations.superimposition_matrix">superimposition<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#translation_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.translation_from_matrix">translation<wbr></wbr>_from<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#translation_matrix" class="internal-link" title="niryo_libraries.tf.transformations.translation_matrix">translation<wbr></wbr>_matrix</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#unit_vector" class="internal-link" title="niryo_libraries.tf.transformations.unit_vector">unit<wbr></wbr>_vector</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="#vector_norm" class="internal-link" title="niryo_libraries.tf.transformations.vector_norm">vector<wbr></wbr>_norm</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_import_module" class="internal-link" title="niryo_libraries.tf.transformations._import_module">_import<wbr></wbr>_module</a></code>
            </div>
        

    </li>
</ul> 

        
         

        <div class="childrenKindTitle">Variables</div>
        <ul>
    
    <li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_AXES2TUPLE" class="internal-link" title="niryo_libraries.tf.transformations._AXES2TUPLE">_AXES2TUPLE</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_EPS" class="internal-link" title="niryo_libraries.tf.transformations._EPS">_EPS</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_NEXT_AXIS" class="internal-link" title="niryo_libraries.tf.transformations._NEXT_AXIS">_NEXT<wbr></wbr>_AXIS</a></code>
            </div>
        

    </li><li class="private">
        
        
        

        
            <div class="itemName"><code><a href="#_TUPLE2AXES" class="internal-link" title="niryo_libraries.tf.transformations._TUPLE2AXES">_TUPLE2AXES</a></code>
            </div>
        

    </li>
</ul> 

        
         
        
      </div>
  </div><div>

      <div class="thingTitle">
        <span>Package</span>
        <code><a href="niryo_libraries.tf.html" class="internal-link" title="The parent of this module">tf</a></code> 
      </div>
      
      <div>
        

        <div class="childrenKindTitle">Modules</div>
        <ul>
    
    <li class="">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.msg.html" class="internal-link" title="niryo_libraries.tf.msg">msg</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.srv.html" class="internal-link" title="niryo_libraries.tf.srv">srv</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.broadcaster.html" class="internal-link" title="niryo_libraries.tf.broadcaster">broadcaster</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.listener.html" class="internal-link" title="niryo_libraries.tf.listener">listener</a></code>
            </div>
        

    </li><li class="">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.tfwtf.html" class="internal-link" title="niryo_libraries.tf.tfwtf">tfwtf</a></code>
            </div>
        

    </li><li class=" thisobject">
        
        
        

        
            <div class="itemName"><code><a href="niryo_libraries.tf.transformations.html" class="internal-link" title="niryo_libraries.tf.transformations">transformations</a></code>
            </div>
        

    </li>
</ul> 

        
        

        
         

        
         

        
         

        
         
        
      </div>
  </div>

</nav>
        <!-- No sidebar toggle for read the docs theme, the sidebar is always
          visible when the screen is width enough.
        -->
      </div>

    </nav>
    
    <div class="container-fluid">

      <div id="main" class="">
        

        

        <div id="search-results-container" style="display: none;">
        
          <div id="search-buttons">
            <span class="label label-default" id="search-docstrings-button">
            <label class="checkbox-inline">
              <input type="checkbox" id="toggle-search-in-docstrings-checkbox" value="false" onclick="toggleSearchInDocstrings()">
                search in docstrings
              </input>
            </label>
            </span>
            
          </div>
          
          <noscript>
              <h1>Cannot search: JavaScript is not supported/enabled in your browser.</h1>
          </noscript>
  
          <div class="hint" id="search-help-box">
            <p class="rst-last">
        
              Search bar offers the following options:
              <ul>   
                  <li>
                    <strong>Term presence.</strong> The below example searches for documents that 
                      must contain “foo”, might contain “bar” and must not contain “baz”: <code>+foo bar -baz</code>
                  </li> 
  
                  <li>
                    <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”: <code>foo*</code>
                  </li> 
  
                  <li>
                    <strong>Search in specific fields.</strong> The following search matches all objects 
                    in "twisted.mail" that matches “search”: <code>+qname:twisted.mail.* +search</code>
  
                    <p>
                      Possible fields: 'name', 'qname' (fully qualified name), 'docstring', and 'kind'.
                      Last two fields are only applicable if "search in docstrings" is enabled.
                    </p>
                  </li>
  
                  <li>
                    <strong>Fuzzy matches.</strong> The following search matches all documents 
                    that have a word within 1 edit distance of “foo”: <code>foo~1</code>
                  </li>
              </ul>
  
            </p>
          </div>
  
          <div id="search-status"> </div>
  
          <div class="warning" id="search-warn-box" style="display: none;">
            <p class="rst-last"><span id="search-warn"></span></p>
          </div>
  
          <table id="search-results">
            <!-- Filled dynamically by JS -->
          </table>
          
          <div style="margin-top: 8px;">
            <p>Results provided by <a href="https://lunrjs.com">Lunr.js</a></p>
          </div>
        </div>

        <div class="page-header">
          <h1 class="module"><code><code><a href="index.html" class="internal-link">niryo_libraries</a></code><wbr></wbr>.<code><a href="niryo_libraries.tf.html" class="internal-link" title="niryo_libraries.tf">tf</a></code><wbr></wbr>.<code><a href="niryo_libraries.tf.transformations.html" class="internal-link" title="niryo_libraries.tf.transformations">transformations</a></code></code></h1>
          <div id="showPrivate">
            <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
          </div>
        </div>

        <div class="categoryHeader">
          module documentation
        </div>

        <div class="extrasDocstring">
          
          <p></p>
        </div>

        <div class="moduleDocstring">
          <div><p>Homogeneous Transformation Matrices and Quaternions.</p>
<p>A library for calculating 4x4 matrices for translating, rotating, reflecting,
scaling, shearing, projecting, orthogonalizing, and superimposing arrays of
3D homogeneous coordinates as well as for converting between rotation matrices,
Euler angles, and quaternions. Also includes an Arcball control object and
functions to decompose transformation matrices.</p>
<div class="rst-section" id="rst-requirements">
<h2 class="heading">Requirements</h2>
<ul class="rst-simple">
<li><a class="rst-reference external" href="http://www.python.org" target="_top">Python 2.6</a></li>
<li><a class="rst-reference external" href="http://numpy.scipy.org" target="_top">Numpy 1.3</a></li>
<li><a class="rst-reference external" href="http://www.lfd.uci.edu/~gohlke/" target="_top">transformations.c 20090418</a>
(optional implementation of some functions in C)</li>
</ul>
</div>
<div class="rst-section" id="rst-notes">
<h2 class="heading">Notes</h2>
<p>Matrices (M) can be inverted using numpy.linalg.inv(M), concatenated using
numpy.dot(M0, M1), or used to transform homogeneous coordinates (v) using
numpy.dot(M, v) for shape (4, *) "point of arrays", respectively
numpy.dot(v, M.T) for shape (*, 4) "array of points".</p>
<p>Calculations are carried out with numpy.float64 precision.</p>
<p>This Python implementation is not optimized for speed.</p>
<p>Vector, point, quaternion, and matrix function arguments are expected to be
"array like", i.e. tuple, list, or numpy arrays.</p>
<p>Return types are numpy arrays unless specified otherwise.</p>
<p>Angles are in radians unless specified otherwise.</p>
<p>Quaternions ix+jy+kz+w are represented as [x, y, z, w].</p>
<p>Use the transpose of transformation matrices for OpenGL glMultMatrixd().</p>
<p>A triple of Euler angles can be applied/interpreted in 24 ways, which can
be specified using a 4 character string or encoded 4-tuple:</p>
<blockquote>
<p><em>Axes 4-string</em>: e.g. 'sxyz' or 'ryxy'</p>
<ul class="rst-simple">
<li>first character : rotations are applied to 's'tatic or 'r'otating frame</li>
<li>remaining characters : successive rotation axis 'x', 'y', or 'z'</li>
</ul>
<p><em>Axes 4-tuple</em>: e.g. (0, 0, 0, 0) or (1, 1, 1, 1)</p>
<ul class="rst-simple">
<li>inner axis: code of axis ('x':0, 'y':1, 'z':2) of rightmost matrix.</li>
<li>parity : even (0) if inner axis 'x' is followed by 'y', 'y' is followed
by 'z', or 'z' is followed by 'x'. Otherwise odd (1).</li>
<li>repetition : first and last axis are same (1) or different (0).</li>
<li>frame : rotations are applied to static (0) or rotating (1) frame.</li>
</ul>
</blockquote>
</div>
<div class="rst-section" id="rst-references">
<h2 class="heading">References</h2>
<ol class="rst-arabic simple">
<li>Matrices and transformations. Ronald Goldman.
In "Graphics Gems I", pp 472-475. Morgan Kaufmann, 1990.</li>
<li>More matrices and transformations: shear and pseudo-perspective.
Ronald Goldman. In "Graphics Gems II", pp 320-323. Morgan Kaufmann, 1991.</li>
<li>Decomposing a matrix into simple transformations. Spencer Thomas.
In "Graphics Gems II", pp 320-323. Morgan Kaufmann, 1991.</li>
<li>Recovering the data from the transformation matrix. Ronald Goldman.
In "Graphics Gems II", pp 324-331. Morgan Kaufmann, 1991.</li>
<li>Euler angle conversion. Ken Shoemake.
In "Graphics Gems IV", pp 222-229. Morgan Kaufmann, 1994.</li>
<li>Arcball rotation control. Ken Shoemake.
In "Graphics Gems IV", pp 175-192. Morgan Kaufmann, 1994.</li>
<li>Representing attitude: Euler angles, unit quaternions, and rotation
vectors. James Diebel. 2006.</li>
<li>A discussion of the solution for the best rotation to relate two sets
of vectors. W Kabsch. Acta Cryst. 1978. A34, 827-828.</li>
<li>Closed-form solution of absolute orientation using unit quaternions.
BKP Horn. J Opt Soc Am A. 1987. 4(4), 629-642.</li>
<li>Quaternions. Ken Shoemake.
<a class="rst-reference external" href="http://www.sfu.ca/~jwa3/cmpt461/files/quatut.pdf" target="_top">http://www.sfu.ca/~jwa3/cmpt461/files/quatut.pdf</a></li>
<li>From quaternion to matrix and back. JMP van Waveren. 2005.
<a class="rst-reference external" href="http://www.intel.com/cd/ids/developer/asmo-na/eng/293748.htm" target="_top">http://www.intel.com/cd/ids/developer/asmo-na/eng/293748.htm</a></li>
<li>Uniform random rotations. Ken Shoemake.
In "Graphics Gems III", pp 124-132. Morgan Kaufmann, 1992.</li>
</ol>
</div>
<div class="rst-section" id="rst-examples">
<h2 class="heading">Examples</h2>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>alpha, beta, gamma = 0.123, -1.234, 2.345
<span class="py-prompt">&gt;&gt;&gt; </span>origin, xaxis, yaxis, zaxis = (0, 0, 0), (1, 0, 0), (0, 1, 0), (0, 0, 1)
<span class="py-prompt">&gt;&gt;&gt; </span>I = identity_matrix()
<span class="py-prompt">&gt;&gt;&gt; </span>Rx = rotation_matrix(alpha, xaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>Ry = rotation_matrix(beta, yaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>Rz = rotation_matrix(gamma, zaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>R = concatenate_matrices(Rx, Ry, Rz)
<span class="py-prompt">&gt;&gt;&gt; </span>euler = euler_from_matrix(R, <span class="py-string">'rxyz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose([alpha, beta, gamma], euler)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>Re = euler_matrix(alpha, beta, gamma, <span class="py-string">'rxyz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(R, Re)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>al, be, ga = euler_from_matrix(Re, <span class="py-string">'rxyz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(Re, euler_matrix(al, be, ga, <span class="py-string">'rxyz'</span>))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>qx = quaternion_about_axis(alpha, xaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>qy = quaternion_about_axis(beta, yaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>qz = quaternion_about_axis(gamma, zaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_multiply(qx, qy)
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_multiply(q, qz)
<span class="py-prompt">&gt;&gt;&gt; </span>Rq = quaternion_matrix(q)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(R, Rq)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>S = scale_matrix(1.23, origin)
<span class="py-prompt">&gt;&gt;&gt; </span>T = translation_matrix((1, 2, 3))
<span class="py-prompt">&gt;&gt;&gt; </span>Z = shear_matrix(beta, xaxis, origin, zaxis)
<span class="py-prompt">&gt;&gt;&gt; </span>R = random_rotation_matrix(numpy.random.rand(3))
<span class="py-prompt">&gt;&gt;&gt; </span>M = concatenate_matrices(T, R, Z, S)
<span class="py-prompt">&gt;&gt;&gt; </span>scale, shear, angles, trans, persp = decompose_matrix(M)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(scale, 1.23)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(trans, (1, 2, 3))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(shear, (0, math.tan(beta), 0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(R, euler_matrix(axes=<span class="py-string">'sxyz'</span>, *angles))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>M1 = compose_matrix(scale, shear, angles, trans, persp)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(M, M1)
<span class="py-output">True</span>
</pre></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Unknown Field: authors</td></tr><tr><td colspan="2"><a class="rst-reference external" href="http://www.lfd.uci.edu/~gohlke/" target="_top">Christoph Gohlke</a>,
Laboratory for Fluorescence Dynamics, University of California, Irvine</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Unknown Field: version</td></tr><tr><td colspan="2">20090418</td></tr></table></div>
        </div>

        <div id="splitTables">
          <table class="children sortable" id="id2811">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="niryo_libraries.tf.transformations.Arcball.html" class="internal-link" title="niryo_libraries.tf.transformations.Arcball"><wbr></wbr>Arcball</a></code></td>
    <td>Virtual Trackball Control.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#arcball_constrain_to_axis" class="internal-link" title="niryo_libraries.tf.transformations.arcball_constrain_to_axis">arcball<wbr></wbr>_constrain<wbr></wbr>_to<wbr></wbr>_axis</a></code></td>
    <td>Return sphere point perpendicular to axis.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#arcball_map_to_sphere" class="internal-link" title="niryo_libraries.tf.transformations.arcball_map_to_sphere">arcball<wbr></wbr>_map<wbr></wbr>_to<wbr></wbr>_sphere</a></code></td>
    <td>Return unit sphere coordinates from window coordinates.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#arcball_nearest_axis" class="internal-link" title="niryo_libraries.tf.transformations.arcball_nearest_axis">arcball<wbr></wbr>_nearest<wbr></wbr>_axis</a></code></td>
    <td>Return axis, which arc is nearest to point.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#clip_matrix" class="internal-link" title="niryo_libraries.tf.transformations.clip_matrix">clip<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to obtain normalized device coordinates from frustrum.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#compose_matrix" class="internal-link" title="niryo_libraries.tf.transformations.compose_matrix">compose<wbr></wbr>_matrix</a></code></td>
    <td>Return transformation matrix from sequence of transformations.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#concatenate_matrices" class="internal-link" title="niryo_libraries.tf.transformations.concatenate_matrices">concatenate<wbr></wbr>_matrices</a></code></td>
    <td>Return concatenation of series of transformation matrices.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#decompose_matrix" class="internal-link" title="niryo_libraries.tf.transformations.decompose_matrix">decompose<wbr></wbr>_matrix</a></code></td>
    <td>Return sequence of transformations from transformation matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#euler_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.euler_from_matrix">euler<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return Euler angles from rotation matrix for specified axis sequence.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#euler_from_quaternion" class="internal-link" title="niryo_libraries.tf.transformations.euler_from_quaternion">euler<wbr></wbr>_from<wbr></wbr>_quaternion</a></code></td>
    <td>Return Euler angles from quaternion for specified axis sequence.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#euler_matrix" class="internal-link" title="niryo_libraries.tf.transformations.euler_matrix">euler<wbr></wbr>_matrix</a></code></td>
    <td>Return homogeneous rotation matrix from Euler angles and axis sequence.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#identity_matrix" class="internal-link" title="niryo_libraries.tf.transformations.identity_matrix">identity<wbr></wbr>_matrix</a></code></td>
    <td>Return 4x4 identity/unit matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#inverse_matrix" class="internal-link" title="niryo_libraries.tf.transformations.inverse_matrix">inverse<wbr></wbr>_matrix</a></code></td>
    <td>Return inverse of square transformation matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_same_transform" class="internal-link" title="niryo_libraries.tf.transformations.is_same_transform">is<wbr></wbr>_same<wbr></wbr>_transform</a></code></td>
    <td>Return True if two matrices perform same transformation.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#orthogonalization_matrix" class="internal-link" title="niryo_libraries.tf.transformations.orthogonalization_matrix">orthogonalization<wbr></wbr>_matrix</a></code></td>
    <td>Return orthogonalization matrix for crystallographic cell coordinates.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#projection_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.projection_from_matrix">projection<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return projection plane and perspective point from projection matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#projection_matrix" class="internal-link" title="niryo_libraries.tf.transformations.projection_matrix">projection<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to project onto plane defined by point and normal.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_about_axis" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_about_axis">quaternion<wbr></wbr>_about<wbr></wbr>_axis</a></code></td>
    <td>Return quaternion for rotation about axis.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_conjugate" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_conjugate">quaternion<wbr></wbr>_conjugate</a></code></td>
    <td>Return conjugate of quaternion.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_from_euler" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_from_euler">quaternion<wbr></wbr>_from<wbr></wbr>_euler</a></code></td>
    <td>Return quaternion from Euler angles and axis sequence.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_from_matrix">quaternion<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return quaternion from rotation matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_inverse" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_inverse">quaternion<wbr></wbr>_inverse</a></code></td>
    <td>Return inverse of quaternion.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_matrix" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_matrix">quaternion<wbr></wbr>_matrix</a></code></td>
    <td>Return homogeneous rotation matrix from quaternion.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_multiply" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_multiply">quaternion<wbr></wbr>_multiply</a></code></td>
    <td>Return multiplication of two quaternions.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#quaternion_slerp" class="internal-link" title="niryo_libraries.tf.transformations.quaternion_slerp">quaternion<wbr></wbr>_slerp</a></code></td>
    <td>Return spherical linear interpolation between two quaternions.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#random_quaternion" class="internal-link" title="niryo_libraries.tf.transformations.random_quaternion">random<wbr></wbr>_quaternion</a></code></td>
    <td>Return uniform random unit quaternion.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#random_rotation_matrix" class="internal-link" title="niryo_libraries.tf.transformations.random_rotation_matrix">random<wbr></wbr>_rotation<wbr></wbr>_matrix</a></code></td>
    <td>Return uniform random rotation matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#random_vector" class="internal-link" title="niryo_libraries.tf.transformations.random_vector">random<wbr></wbr>_vector</a></code></td>
    <td>Return array of random doubles in the half-open interval [0.0, 1.0).</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#reflection_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.reflection_from_matrix">reflection<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return mirror plane point and normal vector from reflection matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#reflection_matrix" class="internal-link" title="niryo_libraries.tf.transformations.reflection_matrix">reflection<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to mirror at plane defined by point and normal vector.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#rotation_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.rotation_from_matrix">rotation<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return rotation angle and axis from rotation matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#rotation_matrix" class="internal-link" title="niryo_libraries.tf.transformations.rotation_matrix">rotation<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to rotate about axis defined by point and direction.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#scale_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.scale_from_matrix">scale<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return scaling factor, origin and direction from scaling matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#scale_matrix" class="internal-link" title="niryo_libraries.tf.transformations.scale_matrix">scale<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to scale by factor around origin in direction.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#shear_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.shear_from_matrix">shear<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return shear angle, direction and plane from shear matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#shear_matrix" class="internal-link" title="niryo_libraries.tf.transformations.shear_matrix">shear<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to shear by angle along direction vector on shear plane.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#superimposition_matrix" class="internal-link" title="niryo_libraries.tf.transformations.superimposition_matrix">superimposition<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to transform given vector set into second vector set.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#translation_from_matrix" class="internal-link" title="niryo_libraries.tf.transformations.translation_from_matrix">translation<wbr></wbr>_from<wbr></wbr>_matrix</a></code></td>
    <td>Return translation vector from translation matrix.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#translation_matrix" class="internal-link" title="niryo_libraries.tf.transformations.translation_matrix">translation<wbr></wbr>_matrix</a></code></td>
    <td>Return matrix to translate by direction vector.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#unit_vector" class="internal-link" title="niryo_libraries.tf.transformations.unit_vector">unit<wbr></wbr>_vector</a></code></td>
    <td>Return ndarray normalized by length, i.e. eucledian norm, along axis.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#vector_norm" class="internal-link" title="niryo_libraries.tf.transformations.vector_norm">vector<wbr></wbr>_norm</a></code></td>
    <td>Return length, i.e. eucledian norm, of ndarray along axis.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_import_module" class="internal-link" title="niryo_libraries.tf.transformations._import_module">_import<wbr></wbr>_module</a></code></td>
    <td>Try import all public attributes from module into global namespace.</td>
  </tr><tr class="constant private">
    
    <td>Constant</td>
    <td><code><a href="#_AXES2TUPLE" class="internal-link" title="niryo_libraries.tf.transformations._AXES2TUPLE">_AXES2TUPLE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant private">
    
    <td>Constant</td>
    <td><code><a href="#_EPS" class="internal-link" title="niryo_libraries.tf.transformations._EPS">_EPS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant private">
    
    <td>Constant</td>
    <td><code><a href="#_NEXT_AXIS" class="internal-link" title="niryo_libraries.tf.transformations._NEXT_AXIS">_NEXT<wbr></wbr>_AXIS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant private">
    
    <td>Constant</td>
    <td><code><a href="#_TUPLE2AXES" class="internal-link" title="niryo_libraries.tf.transformations._TUPLE2AXES">_TUPLE2AXES</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

            
        </div>

        <div id="childList">
          <div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.arcball_constrain_to_axis">
    
  </a>
  <a name="arcball_constrain_to_axis">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">arcball_constrain_to_axis</span><span class="function-signature">(point, axis)</span>:
    
    <a class="headerLink" href="#arcball_constrain_to_axis" title="niryo_libraries.tf.transformations.arcball_constrain_to_axis">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return sphere point perpendicular to axis.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.arcball_map_to_sphere">
    
  </a>
  <a name="arcball_map_to_sphere">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">arcball_map_to_sphere</span><span class="function-signature">(point, center, radius)</span>:
    
    <a class="headerLink" href="#arcball_map_to_sphere" title="niryo_libraries.tf.transformations.arcball_map_to_sphere">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return unit sphere coordinates from window coordinates.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.arcball_nearest_axis">
    
  </a>
  <a name="arcball_nearest_axis">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">arcball_nearest_axis</span><span class="function-signature">(point, axes)</span>:
    
    <a class="headerLink" href="#arcball_nearest_axis" title="niryo_libraries.tf.transformations.arcball_nearest_axis">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return axis, which arc is nearest to point.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.clip_matrix">
    
  </a>
  <a name="clip_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">clip_matrix</span><span class="function-signature">(left, right, bottom, top, near, far, perspective=False)</span>:
    
    <a class="headerLink" href="#clip_matrix" title="niryo_libraries.tf.transformations.clip_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to obtain normalized device coordinates from frustrum.</p>
<p>The frustrum bounds are axis-aligned along x (left, right),
y (bottom, top) and z (near, far).</p>
<p>Normalized device coordinates are in range [-1, 1] if coordinates are
inside the frustrum.</p>
<p>If perspective is True the frustrum is a truncated pyramid with the
perspective point at origin and direction along z axis, otherwise an
orthographic canonical view volume (a box).</p>
<p>Homogeneous coordinates transformed by the perspective clip matrix
need to be dehomogenized (devided by w coordinate).</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>frustrum = numpy.random.rand(6)
<span class="py-prompt">&gt;&gt;&gt; </span>frustrum[1] += frustrum[0]
<span class="py-prompt">&gt;&gt;&gt; </span>frustrum[3] += frustrum[2]
<span class="py-prompt">&gt;&gt;&gt; </span>frustrum[5] += frustrum[4]
<span class="py-prompt">&gt;&gt;&gt; </span>M = clip_matrix(*frustrum, perspective=<span class="py-builtin">False</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.dot(M, [frustrum[0], frustrum[2], frustrum[4], 1.0])
<span class="py-output">array([-1., -1., -1.,  1.])</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.dot(M, [frustrum[1], frustrum[3], frustrum[5], 1.0])
<span class="py-output">array([ 1.,  1.,  1.,  1.])</span>
<span class="py-prompt">&gt;&gt;&gt; </span>M = clip_matrix(*frustrum, perspective=<span class="py-builtin">True</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.dot(M, [frustrum[0], frustrum[2], frustrum[4], 1.0])
<span class="py-prompt">&gt;&gt;&gt; </span>v / v[3]
<span class="py-output">array([-1., -1., -1.,  1.])</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.dot(M, [frustrum[1], frustrum[3], frustrum[4], 1.0])
<span class="py-prompt">&gt;&gt;&gt; </span>v / v[3]
<span class="py-output">array([ 1.,  1., -1.,  1.])</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.compose_matrix">
    
  </a>
  <a name="compose_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">compose_matrix</span><span class="function-signature">(scale=None, shear=None, angles=None, translate=None, perspective=None)</span>:
    
    <a class="headerLink" href="#compose_matrix" title="niryo_libraries.tf.transformations.compose_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return transformation matrix from sequence of transformations.</p>
<p>This is the inverse of the decompose_matrix function.</p>
<dl class="rst-docutils">
<dt>Sequence of transformations:</dt>
<dd>scale : vector of 3 scaling factors
shear : list of shear factors for x-y, x-z, y-z axes
angles : list of Euler angles about static x, y, z axes
translate : translation vector along x, y, z axes
perspective : perspective partition of matrix</dd>
</dl>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>scale = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>shear = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>angles = (numpy.random.random(3) - 0.5) * (2*math.pi)
<span class="py-prompt">&gt;&gt;&gt; </span>trans = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>persp = numpy.random.random(4) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>M0 = compose_matrix(scale, shear, angles, trans, persp)
<span class="py-prompt">&gt;&gt;&gt; </span>result = decompose_matrix(M0)
<span class="py-prompt">&gt;&gt;&gt; </span>M1 = compose_matrix(*result)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(M0, M1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.concatenate_matrices">
    
  </a>
  <a name="concatenate_matrices">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">concatenate_matrices</span><span class="function-signature">(*matrices)</span>:
    
    <a class="headerLink" href="#concatenate_matrices" title="niryo_libraries.tf.transformations.concatenate_matrices">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return concatenation of series of transformation matrices.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>M = numpy.random.rand(16).reshape((4, 4)) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(M, concatenate_matrices(M))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(numpy.dot(M, M.T), concatenate_matrices(M, M.T))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.decompose_matrix">
    
  </a>
  <a name="decompose_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">decompose_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#decompose_matrix" title="niryo_libraries.tf.transformations.decompose_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return sequence of transformations from transformation matrix.</p>
<dl class="rst-docutils">
<dt>matrix <span class="classifier-delimiter">:</span> <span class="rst-classifier">array_like</span></dt>
<dd>Non-degenerative homogeneous transformation matrix</dd>
<dt>Return tuple of:</dt>
<dd>scale : vector of 3 scaling factors
shear : list of shear factors for x-y, x-z, y-z axes
angles : list of Euler angles about static x, y, z axes
translate : translation vector along x, y, z axes
perspective : perspective partition of matrix</dd>
</dl>
<p>Raise ValueError if matrix is of wrong type or degenerative.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>T0 = translation_matrix((1, 2, 3))
<span class="py-prompt">&gt;&gt;&gt; </span>scale, shear, angles, trans, persp = decompose_matrix(T0)
<span class="py-prompt">&gt;&gt;&gt; </span>T1 = translation_matrix(trans)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(T0, T1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>S = scale_matrix(0.123)
<span class="py-prompt">&gt;&gt;&gt; </span>scale, shear, angles, trans, persp = decompose_matrix(S)
<span class="py-prompt">&gt;&gt;&gt; </span>scale[0]
<span class="py-output">0.123</span>
<span class="py-prompt">&gt;&gt;&gt; </span>R0 = euler_matrix(1, 2, 3)
<span class="py-prompt">&gt;&gt;&gt; </span>scale, shear, angles, trans, persp = decompose_matrix(R0)
<span class="py-prompt">&gt;&gt;&gt; </span>R1 = euler_matrix(*angles)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(R0, R1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.euler_from_matrix">
    
  </a>
  <a name="euler_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">euler_from_matrix</span><span class="function-signature">(matrix, axes=<span class="rst-variable-quote">'</span><span class="rst-variable-string">sxyz</span><span class="rst-variable-quote">'</span>)</span>:
    
    <a class="headerLink" href="#euler_from_matrix" title="niryo_libraries.tf.transformations.euler_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return Euler angles from rotation matrix for specified axis sequence.</p>
<p>axes : One of 24 axis sequences as string or encoded tuple</p>
<p>Note that many Euler angle triplets can describe one matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>R0 = euler_matrix(1, 2, 3, <span class="py-string">'syxz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>al, be, ga = euler_from_matrix(R0, <span class="py-string">'syxz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>R1 = euler_matrix(al, be, ga, <span class="py-string">'syxz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(R0, R1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>angles = (4.0*math.pi) * (numpy.random.random(3) - 0.5)
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">for</span> axes <span class="py-keyword">in</span> _AXES2TUPLE.keys():
<span class="py-more">... </span>   R0 = euler_matrix(axes=axes, *angles)
<span class="py-more">... </span>   R1 = euler_matrix(axes=axes, *euler_from_matrix(R0, axes))
<span class="py-more">... </span>   <span class="py-keyword">if</span> <span class="py-keyword">not</span> numpy.allclose(R0, R1): <span class="py-builtin">print</span> axes, <span class="py-string">"failed"</span></pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.euler_from_quaternion">
    
  </a>
  <a name="euler_from_quaternion">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">euler_from_quaternion</span><span class="function-signature">(quaternion, axes=<span class="rst-variable-quote">'</span><span class="rst-variable-string">sxyz</span><span class="rst-variable-quote">'</span>)</span>:
    
    <a class="headerLink" href="#euler_from_quaternion" title="niryo_libraries.tf.transformations.euler_from_quaternion">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return Euler angles from quaternion for specified axis sequence.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>angles = euler_from_quaternion([0.06146124, 0, 0, 0.99810947])
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(angles, [0.123, 0, 0])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.euler_matrix">
    
  </a>
  <a name="euler_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">euler_matrix</span><span class="function-signature">(ai, aj, ak, axes=<span class="rst-variable-quote">'</span><span class="rst-variable-string">sxyz</span><span class="rst-variable-quote">'</span>)</span>:
    
    <a class="headerLink" href="#euler_matrix" title="niryo_libraries.tf.transformations.euler_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return homogeneous rotation matrix from Euler angles and axis sequence.</p>
<p>ai, aj, ak : Euler's roll, pitch and yaw angles
axes : One of 24 axis sequences as string or encoded tuple</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>R = euler_matrix(1, 2, 3, <span class="py-string">'syxz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(numpy.sum(R[0]), -1.34786452)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>R = euler_matrix(1, 2, 3, (0, 1, 0, 1))
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(numpy.sum(R[0]), -0.383436184)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>ai, aj, ak = (4.0*math.pi) * (numpy.random.random(3) - 0.5)
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">for</span> axes <span class="py-keyword">in</span> _AXES2TUPLE.keys():
<span class="py-more">... </span>   R = euler_matrix(ai, aj, ak, axes)
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">for</span> axes <span class="py-keyword">in</span> _TUPLE2AXES.keys():
<span class="py-more">... </span>   R = euler_matrix(ai, aj, ak, axes)</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.identity_matrix">
    
  </a>
  <a name="identity_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">identity_matrix</span><span class="function-signature">()</span>:
    
    <a class="headerLink" href="#identity_matrix" title="niryo_libraries.tf.transformations.identity_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return 4x4 identity/unit matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>I = identity_matrix()
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(I, numpy.dot(I, I))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.sum(I), numpy.trace(I)
<span class="py-output">(4.0, 4.0)</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(I, numpy.identity(4, dtype=numpy.float64))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.inverse_matrix">
    
  </a>
  <a name="inverse_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">inverse_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#inverse_matrix" title="niryo_libraries.tf.transformations.inverse_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return inverse of square transformation matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>M0 = random_rotation_matrix()
<span class="py-prompt">&gt;&gt;&gt; </span>M1 = inverse_matrix(M0.T)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(M1, numpy.linalg.inv(M0.T))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">for</span> size <span class="py-keyword">in</span> <span class="py-builtin">range</span>(1, 7):
<span class="py-more">... </span>    M0 = numpy.random.rand(size, size)
<span class="py-more">... </span>    M1 = inverse_matrix(M0)
<span class="py-more">... </span>    <span class="py-keyword">if</span> <span class="py-keyword">not</span> numpy.allclose(M1, numpy.linalg.inv(M0)): <span class="py-builtin">print</span> size</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.is_same_transform">
    
  </a>
  <a name="is_same_transform">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">is_same_transform</span><span class="function-signature">(matrix0, matrix1)</span>:
    
    <a class="headerLink" href="#is_same_transform" title="niryo_libraries.tf.transformations.is_same_transform">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return True if two matrices perform same transformation.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(numpy.identity(4), numpy.identity(4))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(numpy.identity(4), random_rotation_matrix())
<span class="py-output">False</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.orthogonalization_matrix">
    
  </a>
  <a name="orthogonalization_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">orthogonalization_matrix</span><span class="function-signature">(lengths, angles)</span>:
    
    <a class="headerLink" href="#orthogonalization_matrix" title="niryo_libraries.tf.transformations.orthogonalization_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return orthogonalization matrix for crystallographic cell coordinates.</p>
<p>Angles are expected in degrees.</p>
<p>The de-orthogonalization matrix is the inverse.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>O = orthogonalization_matrix((10., 10., 10.), (90., 90., 90.))
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(O[:3, :3], numpy.identity(3, <span class="py-builtin">float</span>) * 10)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>O = orthogonalization_matrix([9.8, 12.0, 15.5], [87.2, 80.7, 69.7])
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(numpy.sum(O), 43.063229)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.projection_from_matrix">
    
  </a>
  <a name="projection_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">projection_from_matrix</span><span class="function-signature">(matrix, pseudo=False)</span>:
    
    <a class="headerLink" href="#projection_from_matrix" title="niryo_libraries.tf.transformations.projection_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return projection plane and perspective point from projection matrix.</p>
<p>Return values are same as arguments for projection_matrix function:
point, normal, direction, perspective, and pseudo.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>point = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>normal = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>direct = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>persp = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>P0 = projection_matrix(point, normal)
<span class="py-prompt">&gt;&gt;&gt; </span>result = projection_from_matrix(P0)
<span class="py-prompt">&gt;&gt;&gt; </span>P1 = projection_matrix(*result)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(P0, P1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>P0 = projection_matrix(point, normal, direct)
<span class="py-prompt">&gt;&gt;&gt; </span>result = projection_from_matrix(P0)
<span class="py-prompt">&gt;&gt;&gt; </span>P1 = projection_matrix(*result)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(P0, P1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>P0 = projection_matrix(point, normal, perspective=persp, pseudo=<span class="py-builtin">False</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>result = projection_from_matrix(P0, pseudo=<span class="py-builtin">False</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>P1 = projection_matrix(*result)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(P0, P1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>P0 = projection_matrix(point, normal, perspective=persp, pseudo=<span class="py-builtin">True</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>result = projection_from_matrix(P0, pseudo=<span class="py-builtin">True</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>P1 = projection_matrix(*result)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(P0, P1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.projection_matrix">
    
  </a>
  <a name="projection_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">projection_matrix</span><span class="function-signature">(point, normal, direction=None, perspective=None, pseudo=False)</span>:
    
    <a class="headerLink" href="#projection_matrix" title="niryo_libraries.tf.transformations.projection_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to project onto plane defined by point and normal.</p>
<p>Using either perspective point, projection direction, or none of both.</p>
<p>If pseudo is True, perspective projections will preserve relative depth
such that Perspective = dot(Orthogonal, PseudoPerspective).</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>P = projection_matrix((0, 0, 0), (1, 0, 0))
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(P[1:, 1:], numpy.identity(4)[1:, 1:])
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>point = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>normal = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>direct = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>persp = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>P0 = projection_matrix(point, normal)
<span class="py-prompt">&gt;&gt;&gt; </span>P1 = projection_matrix(point, normal, direction=direct)
<span class="py-prompt">&gt;&gt;&gt; </span>P2 = projection_matrix(point, normal, perspective=persp)
<span class="py-prompt">&gt;&gt;&gt; </span>P3 = projection_matrix(point, normal, perspective=persp, pseudo=<span class="py-builtin">True</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(P2, numpy.dot(P0, P3))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>P = projection_matrix((3, 0, 0), (1, 1, 0), (1, 0, 0))
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = (numpy.random.rand(4, 5) - 0.5) * 20.0
<span class="py-prompt">&gt;&gt;&gt; </span>v0[3] = 1.0
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.dot(P, v0)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1[1], v0[1])
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1[0], 3.0-v1[1])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_about_axis">
    
  </a>
  <a name="quaternion_about_axis">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_about_axis</span><span class="function-signature">(angle, axis)</span>:
    
    <a class="headerLink" href="#quaternion_about_axis" title="niryo_libraries.tf.transformations.quaternion_about_axis">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return quaternion for rotation about axis.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_about_axis(0.123, (1, 0, 0))
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(q, [0.06146124, 0, 0, 0.99810947])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_conjugate">
    
  </a>
  <a name="quaternion_conjugate">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_conjugate</span><span class="function-signature">(quaternion)</span>:
    
    <a class="headerLink" href="#quaternion_conjugate" title="niryo_libraries.tf.transformations.quaternion_conjugate">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return conjugate of quaternion.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q0 = random_quaternion()
<span class="py-prompt">&gt;&gt;&gt; </span>q1 = quaternion_conjugate(q0)
<span class="py-prompt">&gt;&gt;&gt; </span>q1[3] == q0[3] <span class="py-keyword">and</span> <span class="py-builtin">all</span>(q1[:3] == -q0[:3])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_from_euler">
    
  </a>
  <a name="quaternion_from_euler">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_from_euler</span><span class="function-signature">(ai, aj, ak, axes=<span class="rst-variable-quote">'</span><span class="rst-variable-string">sxyz</span><span class="rst-variable-quote">'</span>)</span>:
    
    <a class="headerLink" href="#quaternion_from_euler" title="niryo_libraries.tf.transformations.quaternion_from_euler">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return quaternion from Euler angles and axis sequence.</p>
<p>ai, aj, ak : Euler's roll, pitch and yaw angles
axes : One of 24 axis sequences as string or encoded tuple</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_from_euler(1, 2, 3, <span class="py-string">'ryxz'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(q, [0.310622, -0.718287, 0.444435, 0.435953])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_from_matrix">
    
  </a>
  <a name="quaternion_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_from_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#quaternion_from_matrix" title="niryo_libraries.tf.transformations.quaternion_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return quaternion from rotation matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>R = rotation_matrix(0.123, (1, 2, 3))
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_from_matrix(R)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(q, [0.0164262, 0.0328524, 0.0492786, 0.9981095])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_inverse">
    
  </a>
  <a name="quaternion_inverse">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_inverse</span><span class="function-signature">(quaternion)</span>:
    
    <a class="headerLink" href="#quaternion_inverse" title="niryo_libraries.tf.transformations.quaternion_inverse">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return inverse of quaternion.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q0 = random_quaternion()
<span class="py-prompt">&gt;&gt;&gt; </span>q1 = quaternion_inverse(q0)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(quaternion_multiply(q0, q1), [0, 0, 0, 1])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_matrix">
    
  </a>
  <a name="quaternion_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_matrix</span><span class="function-signature">(quaternion)</span>:
    
    <a class="headerLink" href="#quaternion_matrix" title="niryo_libraries.tf.transformations.quaternion_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return homogeneous rotation matrix from quaternion.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>R = quaternion_matrix([0.06146124, 0, 0, 0.99810947])
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(R, rotation_matrix(0.123, (1, 0, 0)))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_multiply">
    
  </a>
  <a name="quaternion_multiply">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_multiply</span><span class="function-signature">(quaternion1, quaternion0)</span>:
    
    <a class="headerLink" href="#quaternion_multiply" title="niryo_libraries.tf.transformations.quaternion_multiply">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return multiplication of two quaternions.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_multiply([1, -2, 3, 4], [-5, 6, 7, 8])
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(q, [-44, -14, 48, 28])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.quaternion_slerp">
    
  </a>
  <a name="quaternion_slerp">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">quaternion_slerp</span><span class="function-signature">(quat0, quat1, fraction, spin=0, shortestpath=True)</span>:
    
    <a class="headerLink" href="#quaternion_slerp" title="niryo_libraries.tf.transformations.quaternion_slerp">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return spherical linear interpolation between two quaternions.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q0 = random_quaternion()
<span class="py-prompt">&gt;&gt;&gt; </span>q1 = random_quaternion()
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_slerp(q0, q1, 0.0)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(q, q0)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_slerp(q0, q1, 1.0, 1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(q, q1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>q = quaternion_slerp(q0, q1, 0.5)
<span class="py-prompt">&gt;&gt;&gt; </span>angle = math.acos(numpy.dot(q0, q))
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(2.0, math.acos(numpy.dot(q0, q1)) / angle) <span class="py-keyword">or</span>         numpy.allclose(2.0, math.acos(-numpy.dot(q0, q1)) / angle)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.random_quaternion">
    
  </a>
  <a name="random_quaternion">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">random_quaternion</span><span class="function-signature">(rand=None)</span>:
    
    <a class="headerLink" href="#random_quaternion" title="niryo_libraries.tf.transformations.random_quaternion">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return uniform random unit quaternion.</p>
<dl class="rst-docutils">
<dt>rand: array like or None</dt>
<dd>Three independent random variables that are uniformly distributed
between 0 and 1.</dd>
</dl>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>q = random_quaternion()
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(1.0, vector_norm(q))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>q = random_quaternion(numpy.random.random(3))
<span class="py-prompt">&gt;&gt;&gt; </span>q.shape
<span class="py-output">(4,)</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.random_rotation_matrix">
    
  </a>
  <a name="random_rotation_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">random_rotation_matrix</span><span class="function-signature">(rand=None)</span>:
    
    <a class="headerLink" href="#random_rotation_matrix" title="niryo_libraries.tf.transformations.random_rotation_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return uniform random rotation matrix.</p>
<dl class="rst-docutils">
<dt>rnd: array like</dt>
<dd>Three independent random variables that are uniformly distributed
between 0 and 1 for each returned quaternion.</dd>
</dl>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>R = random_rotation_matrix()
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(numpy.dot(R.T, R), numpy.identity(4))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.random_vector">
    
  </a>
  <a name="random_vector">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">random_vector</span><span class="function-signature">(size)</span>:
    
    <a class="headerLink" href="#random_vector" title="niryo_libraries.tf.transformations.random_vector">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return array of random doubles in the half-open interval [0.0, 1.0).</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v = random_vector(10000)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.all(v &gt;= 0.0) <span class="py-keyword">and</span> numpy.all(v &lt; 1.0)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = random_vector(10)
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = random_vector(10)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.any(v0 == v1)
<span class="py-output">False</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.reflection_from_matrix">
    
  </a>
  <a name="reflection_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">reflection_from_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#reflection_from_matrix" title="niryo_libraries.tf.transformations.reflection_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return mirror plane point and normal vector from reflection matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>M0 = reflection_matrix(v0, v1)
<span class="py-prompt">&gt;&gt;&gt; </span>point, normal = reflection_from_matrix(M0)
<span class="py-prompt">&gt;&gt;&gt; </span>M1 = reflection_matrix(point, normal)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(M0, M1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.reflection_matrix">
    
  </a>
  <a name="reflection_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">reflection_matrix</span><span class="function-signature">(point, normal)</span>:
    
    <a class="headerLink" href="#reflection_matrix" title="niryo_libraries.tf.transformations.reflection_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to mirror at plane defined by point and normal vector.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = numpy.random.random(4) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>v0[3] = 1.0
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>R = reflection_matrix(v0, v1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(2., numpy.trace(R))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v0, numpy.dot(R, v0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v2 = v0.copy()
<span class="py-prompt">&gt;&gt;&gt; </span>v2[:3] += v1
<span class="py-prompt">&gt;&gt;&gt; </span>v3 = v0.copy()
<span class="py-prompt">&gt;&gt;&gt; </span>v2[:3] -= v1
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v2, numpy.dot(R, v3))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.rotation_from_matrix">
    
  </a>
  <a name="rotation_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">rotation_from_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#rotation_from_matrix" title="niryo_libraries.tf.transformations.rotation_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return rotation angle and axis from rotation matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>angle = (random.random() - 0.5) * (2*math.pi)
<span class="py-prompt">&gt;&gt;&gt; </span>direc = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>point = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>R0 = rotation_matrix(angle, direc, point)
<span class="py-prompt">&gt;&gt;&gt; </span>angle, direc, point = rotation_from_matrix(R0)
<span class="py-prompt">&gt;&gt;&gt; </span>R1 = rotation_matrix(angle, direc, point)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(R0, R1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.rotation_matrix">
    
  </a>
  <a name="rotation_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">rotation_matrix</span><span class="function-signature">(angle, direction, point=None)</span>:
    
    <a class="headerLink" href="#rotation_matrix" title="niryo_libraries.tf.transformations.rotation_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to rotate about axis defined by point and direction.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>angle = (random.random() - 0.5) * (2*math.pi)
<span class="py-prompt">&gt;&gt;&gt; </span>direc = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>point = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>R0 = rotation_matrix(angle, direc, point)
<span class="py-prompt">&gt;&gt;&gt; </span>R1 = rotation_matrix(angle-2*math.pi, direc, point)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(R0, R1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>R0 = rotation_matrix(angle, direc, point)
<span class="py-prompt">&gt;&gt;&gt; </span>R1 = rotation_matrix(-angle, -direc, point)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(R0, R1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>I = numpy.identity(4, numpy.float64)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(I, rotation_matrix(math.pi*2, direc))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(2., numpy.trace(rotation_matrix(math.pi/2,
<span class="py-more">... </span>                                               direc, point)))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.scale_from_matrix">
    
  </a>
  <a name="scale_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">scale_from_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#scale_from_matrix" title="niryo_libraries.tf.transformations.scale_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return scaling factor, origin and direction from scaling matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>factor = random.random() * 10 - 5
<span class="py-prompt">&gt;&gt;&gt; </span>origin = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>direct = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>S0 = scale_matrix(factor, origin)
<span class="py-prompt">&gt;&gt;&gt; </span>factor, origin, direction = scale_from_matrix(S0)
<span class="py-prompt">&gt;&gt;&gt; </span>S1 = scale_matrix(factor, origin, direction)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(S0, S1)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>S0 = scale_matrix(factor, origin, direct)
<span class="py-prompt">&gt;&gt;&gt; </span>factor, origin, direction = scale_from_matrix(S0)
<span class="py-prompt">&gt;&gt;&gt; </span>S1 = scale_matrix(factor, origin, direction)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(S0, S1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.scale_matrix">
    
  </a>
  <a name="scale_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">scale_matrix</span><span class="function-signature">(factor, origin=None, direction=None)</span>:
    
    <a class="headerLink" href="#scale_matrix" title="niryo_libraries.tf.transformations.scale_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to scale by factor around origin in direction.</p>
<p>Use factor -1 for point symmetry.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v = (numpy.random.rand(4, 5) - 0.5) * 20.0
<span class="py-prompt">&gt;&gt;&gt; </span>v[3] = 1.0
<span class="py-prompt">&gt;&gt;&gt; </span>S = scale_matrix(-1.234)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(numpy.dot(S, v)[:3], -1.234*v[:3])
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>factor = random.random() * 10 - 5
<span class="py-prompt">&gt;&gt;&gt; </span>origin = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>direct = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>S = scale_matrix(factor, origin)
<span class="py-prompt">&gt;&gt;&gt; </span>S = scale_matrix(factor, origin, direct)</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.shear_from_matrix">
    
  </a>
  <a name="shear_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">shear_from_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#shear_from_matrix" title="niryo_libraries.tf.transformations.shear_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return shear angle, direction and plane from shear matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>angle = (random.random() - 0.5) * 4*math.pi
<span class="py-prompt">&gt;&gt;&gt; </span>direct = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>point = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>normal = numpy.cross(direct, numpy.random.random(3))
<span class="py-prompt">&gt;&gt;&gt; </span>S0 = shear_matrix(angle, direct, point, normal)
<span class="py-prompt">&gt;&gt;&gt; </span>angle, direct, point, normal = shear_from_matrix(S0)
<span class="py-prompt">&gt;&gt;&gt; </span>S1 = shear_matrix(angle, direct, point, normal)
<span class="py-prompt">&gt;&gt;&gt; </span>is_same_transform(S0, S1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.shear_matrix">
    
  </a>
  <a name="shear_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">shear_matrix</span><span class="function-signature">(angle, direction, point, normal)</span>:
    
    <a class="headerLink" href="#shear_matrix" title="niryo_libraries.tf.transformations.shear_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to shear by angle along direction vector on shear plane.</p>
<p>The shear plane is defined by a point and normal vector. The direction
vector must be orthogonal to the plane's normal vector.</p>
<p>A point P is transformed by the shear matrix into P" such that
the vector P-P" is parallel to the direction vector and its extent is
given by the angle of P-P'-P", where P' is the orthogonal projection
of P onto the shear plane.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>angle = (random.random() - 0.5) * 4*math.pi
<span class="py-prompt">&gt;&gt;&gt; </span>direct = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>point = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>normal = numpy.cross(direct, numpy.random.random(3))
<span class="py-prompt">&gt;&gt;&gt; </span>S = shear_matrix(angle, direct, point, normal)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(1.0, numpy.linalg.det(S))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.superimposition_matrix">
    
  </a>
  <a name="superimposition_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">superimposition_matrix</span><span class="function-signature">(v0, v1, scaling=False, usesvd=True)</span>:
    
    <a class="headerLink" href="#superimposition_matrix" title="niryo_libraries.tf.transformations.superimposition_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to transform given vector set into second vector set.</p>
<p>v0 and v1 are shape (3, *) or (4, *) arrays of at least 3 vectors.</p>
<p>If usesvd is True, the weighted sum of squared deviations (RMSD) is
minimized according to the algorithm by W. Kabsch [8]. Otherwise the
quaternion based algorithm by B. Horn [9] is used (slower when using
this Python implementation).</p>
<p>The returned matrix performs rotation, translation and uniform scaling
(if specified).</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = numpy.random.rand(3, 10)
<span class="py-prompt">&gt;&gt;&gt; </span>M = superimposition_matrix(v0, v0)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(M, numpy.identity(4))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>R = random_rotation_matrix(numpy.random.random(3))
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = ((1,0,0), (0,1,0), (0,0,1), (1,1,1))
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.dot(R, v0)
<span class="py-prompt">&gt;&gt;&gt; </span>M = superimposition_matrix(v0, v1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, numpy.dot(M, v0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = (numpy.random.rand(4, 100) - 0.5) * 20.0
<span class="py-prompt">&gt;&gt;&gt; </span>v0[3] = 1.0
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.dot(R, v0)
<span class="py-prompt">&gt;&gt;&gt; </span>M = superimposition_matrix(v0, v1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, numpy.dot(M, v0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>S = scale_matrix(random.random())
<span class="py-prompt">&gt;&gt;&gt; </span>T = translation_matrix(numpy.random.random(3)-0.5)
<span class="py-prompt">&gt;&gt;&gt; </span>M = concatenate_matrices(T, R, S)
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.dot(M, v0)
<span class="py-prompt">&gt;&gt;&gt; </span>v0[:3] += numpy.random.normal(0.0, 1e-9, 300).reshape(3, -1)
<span class="py-prompt">&gt;&gt;&gt; </span>M = superimposition_matrix(v0, v1, scaling=<span class="py-builtin">True</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, numpy.dot(M, v0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>M = superimposition_matrix(v0, v1, scaling=<span class="py-builtin">True</span>, usesvd=<span class="py-builtin">False</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, numpy.dot(M, v0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.empty((4, 100, 3), dtype=numpy.float64)
<span class="py-prompt">&gt;&gt;&gt; </span>v[:, :, 0] = v0
<span class="py-prompt">&gt;&gt;&gt; </span>M = superimposition_matrix(v0, v1, scaling=<span class="py-builtin">True</span>, usesvd=<span class="py-builtin">False</span>)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, numpy.dot(M, v[:, :, 0]))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.translation_from_matrix">
    
  </a>
  <a name="translation_from_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">translation_from_matrix</span><span class="function-signature">(matrix)</span>:
    
    <a class="headerLink" href="#translation_from_matrix" title="niryo_libraries.tf.transformations.translation_from_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return translation vector from translation matrix.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = translation_from_matrix(translation_matrix(v0))
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v0, v1)
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.translation_matrix">
    
  </a>
  <a name="translation_matrix">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">translation_matrix</span><span class="function-signature">(direction)</span>:
    
    <a class="headerLink" href="#translation_matrix" title="niryo_libraries.tf.transformations.translation_matrix">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return matrix to translate by direction vector.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.random.random(3) - 0.5
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v, translation_matrix(v)[:3, 3])
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.unit_vector">
    
  </a>
  <a name="unit_vector">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">unit_vector</span><span class="function-signature">(data, axis=None, out=None)</span>:
    
    <a class="headerLink" href="#unit_vector" title="niryo_libraries.tf.transformations.unit_vector">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return ndarray normalized by length, i.e. eucledian norm, along axis.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = numpy.random.random(3)
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = unit_vector(v0)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, v0 / numpy.linalg.norm(v0))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v0 = numpy.random.rand(5, 4, 3)
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = unit_vector(v0, axis=-1)
<span class="py-prompt">&gt;&gt;&gt; </span>v2 = v0 / numpy.expand_dims(numpy.sqrt(numpy.sum(v0*v0, axis=2)), 2)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, v2)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = unit_vector(v0, axis=1)
<span class="py-prompt">&gt;&gt;&gt; </span>v2 = v0 / numpy.expand_dims(numpy.sqrt(numpy.sum(v0*v0, axis=1)), 1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, v2)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v1 = numpy.empty((5, 4, 3), dtype=numpy.float64)
<span class="py-prompt">&gt;&gt;&gt; </span>unit_vector(v0, axis=1, out=v1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(v1, v2)
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-builtin">list</span>(unit_vector([]))
<span class="py-output">[]</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-builtin">list</span>(unit_vector([1.0]))
<span class="py-output">[1.0]</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="niryo_libraries.tf.transformations.vector_norm">
    
  </a>
  <a name="vector_norm">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">vector_norm</span><span class="function-signature">(data, axis=None, out=None)</span>:
    
    <a class="headerLink" href="#vector_norm" title="niryo_libraries.tf.transformations.vector_norm">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Return length, i.e. eucledian norm, of ndarray along axis.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.random.random(3)
<span class="py-prompt">&gt;&gt;&gt; </span>n = vector_norm(v)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(n, numpy.linalg.norm(v))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.random.rand(6, 5, 3)
<span class="py-prompt">&gt;&gt;&gt; </span>n = vector_norm(v, axis=-1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(n, numpy.sqrt(numpy.sum(v*v, axis=2)))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>n = vector_norm(v, axis=1)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(n, numpy.sqrt(numpy.sum(v*v, axis=1)))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>v = numpy.random.rand(5, 4, 3)
<span class="py-prompt">&gt;&gt;&gt; </span>n = numpy.empty((5, 3), dtype=numpy.float64)
<span class="py-prompt">&gt;&gt;&gt; </span>vector_norm(v, axis=1, out=n)
<span class="py-prompt">&gt;&gt;&gt; </span>numpy.allclose(n, numpy.sqrt(numpy.sum(v*v, axis=1)))
<span class="py-output">True</span>
<span class="py-prompt">&gt;&gt;&gt; </span>vector_norm([])
<span class="py-output">0.0</span>
<span class="py-prompt">&gt;&gt;&gt; </span>vector_norm([1.0])
<span class="py-output">1.0</span>
</pre></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="niryo_libraries.tf.transformations._import_module">
    
  </a>
  <a name="_import_module">
    
  </a>
  <div class="functionHeader">
    
    
    <span class="py-keyword">def</span> <span class="py-defname">_import_module</span><span class="function-signature">(module_name, warn=True, prefix=<span class="rst-variable-quote">'</span><span class="rst-variable-string">_py_</span><span class="rst-variable-quote">'</span>, ignore=<span class="rst-variable-quote">'</span><span class="rst-variable-string">_</span><span class="rst-variable-quote">'</span>)</span>:
    
    <a class="headerLink" href="#_import_module" title="niryo_libraries.tf.transformations._import_module">
      
      
      ¶
    </a>
  </div>
  <div class="docstring functionBody">
    
    <div><p>Try import all public attributes from module into global namespace.</p>
<p>Existing attributes with name clashes are renamed with prefix.
Attributes starting with underscore are ignored by default.</p>
<p>Return True on successful import.</p>
</div>
  </div>
</div><div class="baseconstant private">
  
  
  <a name="niryo_libraries.tf.transformations._AXES2TUPLE">
    
  </a>
  <a name="_AXES2TUPLE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_AXES2TUPLE</span>: <code>dict</code> =
    
    <a class="headerLink" href="#_AXES2TUPLE" title="niryo_libraries.tf.transformations._AXES2TUPLE">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>{<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">sxyz</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>0, <wbr></wbr>0, <wbr></wbr>0, <wbr></wbr>0),
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">sxyx</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>0, <wbr></wbr>0, <wbr></wbr>1, <wbr></wbr>0),
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">sxzy</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>0, <wbr></wbr>1, <wbr></wbr>0, <wbr></wbr>0),
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">sxzx</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>0, <wbr></wbr>1, <wbr></wbr>1, <wbr></wbr>0),
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">syzx</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>1, <wbr></wbr>0, <wbr></wbr>0, <wbr></wbr>0),
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">syzy</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>1, <wbr></wbr>0, <wbr></wbr>1, <wbr></wbr>0),
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">syxz</span><span class="rst-variable-quote">'</span>: (<wbr></wbr>1, <wbr></wbr>1, <wbr></wbr>0, <wbr></wbr>0),
<span class="rst-variable-ellipsis">...</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant private">
  
  
  <a name="niryo_libraries.tf.transformations._EPS">
    
  </a>
  <a name="_EPS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_EPS</span> =
    
    <a class="headerLink" href="#_EPS" title="niryo_libraries.tf.transformations._EPS">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>numpy.finfo(float).eps*4.0</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant private">
  
  
  <a name="niryo_libraries.tf.transformations._NEXT_AXIS">
    
  </a>
  <a name="_NEXT_AXIS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_NEXT_AXIS</span>: <code>list[<wbr></wbr>int]</code> =
    
    <a class="headerLink" href="#_NEXT_AXIS" title="niryo_libraries.tf.transformations._NEXT_AXIS">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>[<wbr></wbr>1, <wbr></wbr>2, <wbr></wbr>0, <wbr></wbr>1]</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant private">
  
  
  <a name="niryo_libraries.tf.transformations._TUPLE2AXES">
    
  </a>
  <a name="_TUPLE2AXES">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_TUPLE2AXES</span> =
    
    <a class="headerLink" href="#_TUPLE2AXES" title="niryo_libraries.tf.transformations._TUPLE2AXES">
      
      
      ¶
    </a>
  </div>
  <div class="functionBody">
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>dict(<wbr></wbr>((v, k) for k, v in _AXES2TUPLE.items()))</code></pre></td></tr></table>
  </div>
</div>
        </div>
      
      </div>
    </div>

    <footer class="navbar navbar-default">
    <hr />
    
    
    <div class="container">
      <a href="index.html">API Documentation</a> for <a href="https://github.com/NiryoRobotics/ned_ros" class="projecthome">Niryo Ned 2</a>,
    generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
      23.9.1 at 2024-03-10 14:48:02.
    </div>
    
    <script src="ajax.js" type="text/javascript"></script>
    <script src="searchlib.js" type="text/javascript"></script>
    <script src="search.js" type="text/javascript"></script>
  
  </footer>
  
    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>